# 概念

区块链概念是由日裔中本聪在2008年中提出的，目的是实现点对点的电子现金系统——比特币（Bitcoin）。该系统讲述了他对电子货币的构想，将不通过第三方作为中心来进行交易，并确保交易的可信、安全。中本聪是比特币的开发者兼创始人，不过很可惜，后来他退隐出了这个平台。

区块链的理念和P2P（Peer to Peer）是有本质区别的，尽管两者都有去中心化的概念，也用到一些算法，但是两者解决不同维度的问题。区块链是解决共识问题，P2P是解决资源共享。例如A和B是借贷关系，P2P的状态是A知道B有资金，A和B之间达成协议，平台上的其他用户并不关心此次交易，只关心B资金余量；而区块链的状态是A借B的资金，A和B之间达成协议，并且要告知平台上的所有用户，大家作为见证：记录A和B此时的资金，记录此次交易。

对于区块链来说比特币只是去中心化的起点，它的协议局限了它的功能，因为其中只有一种符号——比特币，合约也非常简单，满足正常的货币交易。但实际上，这些特点局限了它的发展。

后续的以太坊和超级账本的出现，都是区块链的进一步发展，弥补了早期区块链扩展性的问题，更加符合推广和应用。

图：区块链1.0和2.0的对比 [http://blog.csdn.net/sportshark/article/details/53364690](http://blog.csdn.net/sportshark/article/details/53364690)

| 区块链 V1.0 | 区块链 V2.0 |
| :--- | :--- |
|  |  |

* 广义概念：区块链是去中心化结构、安全传输，并由多方达成共识、参与、记录的一种存储方式。
* 狭义概念：区块链是能够保证每个节点间一致性的链式结构存储的系统。

链式的存储结构，表示每一个节点存储参与者提案的记录是以区块的提交顺序连续存储。就像一个铁链，每一环就代表一个存储的数据。

图：区块链的存储结构（一层一层的区块）

也就是说，区块链在应用过程中，无论采用什么样的共识算法、智能合约、安全协议，必须保证每一个在链上的参与者都参与到每一次提议与记录中来，并有同样效力的决定权。

根据概念，区块链应具有以下三个核心能力：去中心化、防篡改、可追溯。

图：区块链核心以及每个核心的实现（共识（paxos、Pow、PoS、DPos、PBFT），签名认证、链式存储（一致性哈希，超立方体网络、DHT和Churn））

* 去中心化：整个服务没有中心，意味着整个服务无需访问第三方机构，达成共识后，可以直接点对点的对接，具有一定的公平、公开的特点。但对外界来说，整个服务中的每个参与节点都是“中心”，同时也构成了一个“中心”。因此，是否真的是去中心化，还是半去中心化、伪去中心化要看提交者所部署的位置以及职责。
* 防篡改：主要指的是已存储的区块防止被非法修改，通过非对称加密等实现，但其实，在整个提交过程中，既要防止请求被篡改，也要防止非法消息的提交。
* 可追溯：依靠区块链的链式存储结构，每一次提交区块都是顺序执行。因此可以通过链式结构追溯到任意一次提交的信息，不用担心任何一个参与者逾期抵赖。

[http://www.doit.com.cn/p/274630.html](http://www.doit.com.cn/p/274630.html)

为了满足区块链的特性，从架构上来说，需要具备数据层、网络层、核心层、服务层、用户层。

区块是区块链操作的最小存储单元，每一个区块都都必须具备区块头与体，以便于适合区块链系统的运行。区块的结构如下：

> （校对"工信部发布 区块链 数据格式规范"）\***具体参考一下比特币代码什么的**\*
>
> ## 区块体结构：
>
> | 数据项 | 描述 |
> | :--- | :--- |
> | Blocksize（区块大小） | 区块开始到结束的字节长度 |
> | Blockheader | 包含具体区块信息的描述 |
> |  |  |
>
> 数据项 描述 长度
>
> Blocksize（区块大小）到区块结束的字节长度
>
> Blockheader（区块头）包含6个数据项
>
> Transaction counter（交易数量）
>
> Transactions（交易）
>
> 交易列表（非空）
>
> ## 区块头描述：
>
> 数据项 目的
>
> Version（版本）区块版本号
>
> hashPrevBlock（前一区块的Hash）前一区块的256位Hash值
>
> hashMerkleRoot Merkle（根节点Hash值）基于一个区块中所有交易的256位Hash值
>
> Time（时间戳）从1970-01-01 00:00 UTC开始到现在，以秒为单位的当前时间戳
>
> Bits（当前目标的Hash值）压缩格式的当前目标Hash值
>
> 每个区块都包括了一个被称为魔法数的常数、区块的大小、区块头、区块所包含的交易数量及部分或所有的近期新交易。在每个区块中，对整个区块链起决定作用的是区块头。

# 分类

区块链按照应用场景可以分为：私有链、公有链、联盟链，三个类型的应用场景不同，而不是解释它的属性。

私有链：一般适用于一个团体内使用，容错、安全可以酌情考虑，如果节点可信度较高，在选择共识算法上可以考虑无“不可控节点”（拜占庭）问题存在的paxos算法，实际上，这样也带来了性能的提升。这里的节点是proxy服务器（消息转发的服务器，非用户机器），应用功能类似zookeeper，如果直接接入或用户信用度不高，建议不要使用单纯的一致性算法。

公有链：适用于公开使用，所有参与者都是不可控的，每个节点都是直接的参与者，并且对待每个参与者都是无差别的，这样平台需要面对更多的问题，例如节点频繁加入、退出平台，或发送虚假消息，甚至被黑客劫持。因此平台对安全、容错性要求较高，同时“复杂”的共识算法也会导致整个共识过程非常缓慢，如，PoW。

联盟链：适用于多个团体之间的链，参与者在进入服务平台之前，需要进行认证，确定参与者的属性后，才能使用平台。公有链也可以进行认证，但是并不会给参与者打上标签。因为联盟链具有一定的约定性，所以可以接收一些“多中心化”的共识算法的介入，当然如果团体之间并不认可，也可以采取完全中心化的共识算法。

封闭式、开放式、半开放式

